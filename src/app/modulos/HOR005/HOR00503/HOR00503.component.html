<dx-data-grid
    id="gridTotales"
    [dataSource]="DMediosPago"
    keyExpr="ITEM"
    [showBorders]="true"
    [showColumnHeaders]="true"
    width="100%"
    (onCellPrepared)="onCellPrepared($event)"
    >

    <dxo-editing
        mode="cell"
        [useIcons]="false" 
        [allowUpdating]="esEdicion"
        [allowDeleting]="false"
        [allowAdding]="false"
        >
        <dxo-texts
            confirmDeleteMessage="">
        </dxo-texts>
    </dxo-editing>      

    <dxi-column dataField="ITEM"
        [visible]="false">
    </dxi-column>

    <dxi-column dataField="CONCEPTO" [allowEditing]="false" caption=""></dxi-column>
    <dxi-column 
        caption="Valor"
        dataField="VALOR" 
        alignment="right" 
        dataType="number" 
        displayFormat="#,##0"
        [editorOptions]="{ placeholder: 'Valor pago' }">
        <dxo-format
            type="fixedPoint"
            [precision]="0">
        </dxo-format>
    </dxi-column>
    <dxi-column 
        caption="Banco/Cuenta"
        dataField="BANCO_CUENTA" 
        cellTemplate="verBancoCuenta"
        editCellTemplate="listaBancoCuenta"
        [editorOptions]="{ placeholder: 'Banco/Cuenta' }">
    </dxi-column>
    <dxi-column dataField="SOPORTE" [editorOptions]="{ placeholder: 'Soporte' }" caption="Soporte"></dxi-column>

    <div *dxTemplate="let cellInfo of 'verBancoCuenta'">
        {{ cellInfo.data.BANCO_CUENTA }}
    </div>
    <div *dxTemplate="let cellInfo of 'listaBancoCuenta'">
        <dx-select-box 
            #xs_BANCO
            id="xs_BANCO"
            [dataSource]="DBancos" 
            [(value)]="cellInfo.data.ID_BANCO"
            [searchEnabled]="true"
            displayExpr="NOMBRE"
            valueExpr="ID_BANCO"
            searchMode="contains"
            [dropDownOptions]="{ width: 600 }"
            (onValueChanged)="onValueChangedBanco($event, cellInfo)"
            >
            <div *dxTemplate="let data of 'item'">
              <div style="width: 40%; float:left">
                {{ data.ID_BANCO }}
              </div>
              
              <div style="width: 60%; float:right; ">
                {{ data.NOMBRE }}
              </div>
            </div>

        </dx-select-box>
    </div>

    <dxo-summary>
        <dxi-total-item
            name="SelectedRowsSummary"
            summaryType="sum"
            column="VALOR"
            showInColumn="FRM_VALOR"
            displayFormat="TOTAL: {0}"
            valueFormat="#,##0"
        >
        </dxi-total-item>
    </dxo-summary>
</dx-data-grid>
