<div class="file-manager-container">
  <div class="upload-section">
    <input type="file" (change)="onFileSelected($event)" accept="image/*,application/pdf" #fileInput style="display: none">
    <button mat-raised-button color="primary" (click)="fileInput.click()">Cargar archivo</button>
  </div>

  <div class="file-gallery">
    <mat-grid-list cols="4" rowHeight="1:1">
      <mat-grid-tile *ngFor="let file of files$ | async">
        <div class="file-tile">
          <img *ngIf="file.type === 'image'" [src]="file.url" [alt]="file.name" (click)="previewFile(file)">
          <div *ngIf="file.type === 'pdf'" class="pdf-thumbnail" (click)="previewFile(file)">
            <mat-icon>picture_as_pdf</mat-icon>
            <span>{{ file.name }}</span>
          </div>
          <button mat-icon-button color="warn" class="delete-button" (click)="deleteFile(file.id)">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </mat-grid-tile>
    </mat-grid-list>
  </div>

  <div *ngIf="selectedFile" class="file-preview-overlay" (click)="closePreview()">
    <div class="file-preview-container" (click)="$event.stopPropagation()">
      <img *ngIf="selectedFile.type === 'image'" [src]="selectedFile.url" [alt]="selectedFile.name">
      <div *ngIf="selectedFile.type === 'pdf'" #pdfContainer class="pdf-container"></div>
      <button mat-icon-button class="close-button" (click)="closePreview()">
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </div>

</div>

